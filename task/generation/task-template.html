<!-- You must include this JavaScript file -->
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>


<style>

h2 {text-align: left;}
h3 {text-align: left;}
p {text-align: center;}
div {text-align: left;}

/* The container */
.container {
    display: block;
    position: relative;
    padding-left: 35px;
    margin-bottom: 12px;
    cursor: pointer;
    font-size: 18px;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Hide the browser's default checkbox */
.container input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
}

/* Create a custom checkbox */
.checkmark {
    position: absolute;
    top: 0;
    left: 0;
    height: 25px;
    width: 25px;
    background-color: #FFFFFF;
    border: solid 2px #187dbc;
}

/* On mouse-over, add a grey background color */
.container:hover input ~ .checkmark {
    background-color: #187dbc;
}

/* When the checkbox is checked, add a blue background */
.container input:checked ~ .checkmark {
    background-color: #187dbc;
}

/* Create the checkmark/indicator (hidden when not checked) */
.checkmark:after {
    content: "";
    position: absolute;
    display: none;
}

/* Show the checkmark when checked */
.container input:checked ~ .checkmark:after {
    display: block;
}

/* Style the checkmark/indicator */
.container .checkmark:after {
    left: 9px;
    top: 5px;
    width: 5px;
    height: 10px;
    border: solid white;
    border-width: 0 3px 3px 0;
    -webkit-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    transform: rotate(45deg);
}

.boxed {
    border: 1px ;
    position: relative;
}
 
.radio-toolbar {
    margin: 20px;
}

.radio-toolbar input[type="radio"] {
    opacity: 0;
    position: fixed;
    width: 0;
}

.radio-toolbar label {
    display: inline-block;
    background-color: #ddd;
    padding: 10px 20px;
    font-family: sans-serif, Arial;
    font-size: 16px;
    border: 2px solid  #ddd;
    border-radius: 2px;
}

.radio-toolbar label:hover {
    background-color:#15cbac ;
    border-color: #0e8671 ;
    border-radius: 4px;
}

.radio-toolbar input[type="radio"]:focus + label {
    border: 2px #0e8671;
    color: #FFFFFF;
    border-radius: 4px;
}

.radio-toolbar input[type="radio"]:checked + label {
    background-color: #13b99d;
    border-color: #0e8671 ;
    color: #FFFFFF;
    border-radius: 4px;
}

.card {
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
  transition: 0.3s;
  width: 100%;
}

.card:hover {
  box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
}

.container_1 {
  padding: 2px 16px;
  background-color: #FFFFFF;
}

.question{
    font-weight: 600;
}
.answers {
    margin-bottom: 20px;
}


button {
  width: 130px;
  height: 40px;
  background: linear-gradient(to bottom, #4eb5e5 0%,#389ed5 100%); /* W3C */
  border: none;
  border-radius: 5px;
  position: relative;
  border-bottom: 4px solid #2b8bc6;
  color: #fbfbfb;
  font-weight: 600;
  font-family: 'Open Sans', sans-serif;
  text-shadow: 1px 1px 1px rgba(0,0,0,.4);
  font-size: 15px;
  text-align: left;
  text-indent: 5px;
  box-shadow: 0px 3px 0px 0px rgba(0,0,0,.2);
  cursor: pointer;

/* Just for presentation */  
  display: block;
  margin: 0 auto;
  margin-bottom: 20px;
}
button:active {
  box-shadow: 0px 2px 0px 0px rgba(0,0,0,.2);
  top: 1px;
}

button:after {
  content: "";
  width: 0;
  height: 0;
  display: block;
  border-top: 20px solid #187dbc;
  border-bottom: 20px solid #187dbc;
  border-left: 16px solid transparent;
  border-right: 20px solid #187dbc;
  position: absolute;
  opacity: 0.6; 
  right: 0;
  top: 0;
  border-radius: 0 5px 5px 0;  
}

/* Button pointing left */

button.back {
  text-align: right;
  padding-right: 12px;
  box-sizing: border-box;
}
button.back:after {
  content: "";
  width: 0;
  height: 0;
  display: block;
  border-top: 20px solid #187dbc;
  border-bottom: 20px solid #187dbc;
  border-right: 16px solid transparent;
  border-left: 20px solid #187dbc;
  position: absolute;
  opacity: 0.6; 
  left: 0;
  top: 0;
  border-radius: 5px 0 0 5px;    
}

/* Single buttons */

button.site {
  width: 40px;
  text-align: center;
  text-indent: 0;
}
button.site:after{
  display: none;



}

</style>

<crowd-form  answer-format="flatten-objects" id="form">



    <short-instructions>Based on the <strong>content moderation guidelines</strong>, please annotate the comment with the appropriate labels. The content moderation guidelines can be found in <strong> more instructions </strong></short-instructions>
        
    <full-instructions header="Content guidelines and detailed instructions" style="text-color:#0e8671" >        
        <p>In this job, you will be presented with social media comments. Please, for each comment, provide a <b>label</b> and provide a justification for your judgment.</p>
<p>The comments can be labeled as <b>appropriate</b> or <b>inappropriate</b>:</p>
<ul>
    <li><b>Appropriate</b> means that the comment should be allowed in social media platforms such as facebook and twitter.</li>
    <li><b>Inappropriate</b> means that the comment should <b>not</b> be allowed be on a social media platform, where it can be seen by everyone.</li>
</ul>

<h3>Steps</h3>
<ul>
    <li> 1) First, read the comment.</li>
	<li> 2) Then, label the comment </li>
    <li> 3) Finally, provide a justification for your answer. </li>
</ul>
    </full-instructions>

<div id ="-1">
<h2>Consent Form</h2>

You are being invited to participate in a research study in the content moderation research field. 
<br>
<br>
<b>Why are we doing this research study?</b>
<br>
 This study is being done by researchers from Delft University of Technology and its purpose is to understand how content moderation tasks in social media platforms can become more accurate, improving the internet and especially social media websites and benefiting everyone who uses them. 
<br>
<br>
<b> Who can participate in this research study? </b>
<br>
 This study targets people of all gender and ages residing in the United States of America. 
<br>
<br>
<b> What will I be asked to do and how much time will it take? </b>
<br>
 If you agree to take part in this study, you will be asked to moderate 23 short social media comments. Specifically, youâ€™ll be ask to label each comment, stating whether it is appropriate or not, determining its correctness and provide justifications for your judgement. The estimate time of completion of this task is 5 minutes.
<br>
<br>
<b> What are my risks of being in this research study? </b>
<br>
 We believe there are minimal risks associated with this study, however some of the comments might show sensitive and inappropriate language, possibly featuring hate speech, racism, obscenity, etc. 
<br>
<br>
<b> How will my personal information be protected? </b>
<br>	
 Your answers in this study will remain confidential. 
<br>
<br>
<b> Will I be given any money or other compensation for being in this research study? </b>
<br>
 Monetary compensation will be fully provided within 3 days of the completion of this task. Early termination will invalidate monetary compensation.
<br>
<br>
 As researchers we are not qualified to provide counseling services and we will not be following up with you after this study. If you feel upset after completing the study, or find that some questions or aspects of the study triggered distress, talking with a qualified clinician may help. 
<br>
<br>
<b> What happens if I say yes, but I change my mind later? </b>
<br>
 You do not have to be in this study if you do not want to. If you agree to be in the study, but later change your mind, you may drop out at any time. 
<br>
<br>
By clicking <b>"Next"</b> below you are indicating that you are at least 18 years old, have read this consent form and agree to participate in this research study.
<br>
<br>
Please print a copy of this page for your records.

</div>

{TRAINING}




{TASK}
    
    

   <div id="{n}" style="display:none">
	 <h1><strong>Please answer the following questions about yourself:</strong></h1>
		<h2>1. What is your gender?</h2>
		
		<label><input type="radio" name="gender" value="non-binary" required onclick="Answer(this.name)">Non-binary</label>
		<br>
		<label><input type="radio" name="gender" value="male" onclick="Answer(this.name)">Male</label>
		<br>
		<label><input type="radio" name="gender" value="female" onclick="Answer(this.name)">Female</label>
		<br>
		<label><input type="radio" name="gender" value="not-disclose" onclick="Answer(this.name)">Prefer not to disclose</b></label>
		<br>
		<h2>2. What is your year of birth (please enter in the format YYYY; for example '1980')?</h2>
		<input type="text" name="yearofbirth" onchange="Answer(this.name)">
		<br>
		<h2>3. What are your educational qualifications?</h2>
		
		<label><input type="radio" name="education" value="non-schooling" required onclick="Answer(this.name)">No schooling</label>
		<br>
		<label><input type="radio" name="education" value="some-high-school" onclick="Answer(this.name)">Some high school (no diploma)</label>
		<br>
		<label><input type="radio" name="education" value="high-school" onclick="Answer(this.name)">High School</label>
		<br>
		<label><input type="radio" name="education" value="some-college" onclick="Answer(this.name)">Some college</label>
		<br>
		<label><input type="radio" name="education" value="no-degree" onclick="Answer(this.name)">(no degree) Technical/vocational training</label>
		<br>
		<label><input type="radio" name="education" value="associate-degree" onclick="Answer(this.name)">Associate degree</label>
		<br>
		<label><input type="radio" name="education" value="bachelors-degree" onclick="Answer(this.name)">Bachelorâ€™s degree</label>
		<br>
		<label><input type="radio" name="education" value="professional-degree" onclick="Answer(this.name)">Professional degree</label>
		<br>
		<label><input type="radio" name="education" value="master-degree" onclick="Answer(this.name)">Master's degree</label>
		<br>
		<label><input type="radio" name="education" value="doctorate" onclick="Answer(this.name)">Doctorate</label>


		<br>
		<h2>4. What is your ethnicity?</h2>
		<label><input type="radio" name="ethnicity" value="caucasian" required onclick="Answer(this.name)">Caucasian</label>
		<br>
		<label><input type="radio" name="ethnicity" value="african-american" onclick="Answer(this.name)">African-American</label>
		<br>
		<label><input type="radio" name="ethnicity" value="latino-or-hispanic" onclick="Answer(this.name)">Latino or Hispanic</label>
		<br>
		<label><input type="radio" name="ethnicity" value="asian" onclick="Answer(this.name)">Asian</label>
		<br>
		<label><input type="radio" name="ethnicity" value="native-american" onclick="Answer(this.name)">Native American</label>
		<br>
		<label><input type="radio" name="ethnicity" value="native-Hawaiian-or-pacific-islander" onclick="Answer(this.name)">Native Hawaiian or Pacific Islander</label>
		<br>
		<label><input type="radio" name="ethnicity" value="two-or-more" onclick="Answer(this.name)">Two or More</label>
		<br>
		<label><input type="radio" name="ethnicity" value="other-unknown" onclick="Answer(this.name)">Other/Unknown</label>
		<br>
		<label><input type="radio" name="ethnicity" value="prefer-not-to-say" onclick="Answer(this.name)">Prefer not to say</label>
		
	</div>

    
     
    <hr / >
   	
		<div  style="display: flex;">
		 <button style="display:none" class="back" id="prev" onclick="previous()" type="button">Previous</button>
		<button class="button" id="nex" onclick="next()" type="button" >Next</button>
		<button class="button" id="submit" type="button" onclick="submitForm()" style="display:none">Submit</button>
		<button style="display:none !important;"></button>

		</div>
    </crowd-form>

    

<script>
   i = -1
		
		answered_demographics = []
		function Answer(name){
		
		answered_demographics.push(name)
		
		if(new Set(answered_demographics).size == 4){
		showNext();
		}
		}
		function next(){
			if(i == ({n}+1)){
				
				return;
			}
			if(i == 0 && (new Set(checked)).size < 3){
			alert("You havent finished training!")
			return;
			}
			show(i);
			console.log(i);
			i = (i + 1);
			show(i);
			
			document.getElementById("prev").style.display ="block";
			window.location.href = "#"+i;
			document.getElementById("nex").style.display ="none";
			
		}
		
		function init(){
		start = 1;
		end = {n};
		
		for(;start<=end;start++){
			rad = document.getElementsByName("label_"+start.toString());
			
			for(var i = 0; i < rad.length;i++){
			
			rad[i].addEventListener("change",showNext);
			}
		}
		}
		
		init();
		function showNext(){
		if(i != ({n}+1)){
			document.getElementById("nex").style.display ="block";
		}else if(i == ({n}+1)){
		document.getElementById("submit").style.display ="block";
		}
		}
		
		function previous(){
			if(i == -1){
				return;
			}
			show(i);
			i = (i-1);
			if(i == 0){
				  document.getElementById("prev").style.display ="none";
			}
			show(i);
			document.getElementById("nex").style.display ="block";
			document.getElementById("submit").style.display ="none";
		}
		function show(i) {
		  var x = document.getElementById(i.toString());
		  if (x.style.display === "none") {
			x.style.display = "block";
		  } else {
			x.style.display = "none";
		  }
		}

		checked = []
		selected =""
		
		
		
		function displayAnswer(truth,id){
			selection = document.getElementsByName("option_"+id.toString())
		
			for(x = 0; x < 2; x++){
			if(selection[x].checked){
				selected = selection[x]
				
			}
			}
			if(!selected){
			alert("You havent selected an answer!")
			return;
			}
			
			if(selected != ""){
				value = selected.value;
				checked.push(id)
				selected_id = selected.id;
				
				selected_id = selected_id[selected_id.length-1];
				result = document.getElementById("result-"+id.toString()+selected_id)
				if(truth == value)
				{
					selected.parentElement.style.border = "1px solid green";
					result.innerHTML="<b style='padding:10px'>(Correct)</b>"

				}else
				{
					selected.parentElement.style.border = "1px solid red";	
					result.innerHTML="<b style='padding:10px'>(Incorrect)</b>"


				}
				if((new Set(checked)).size >= 3){
				showNext();
				}
			}
		}

		
		
		function submitForm(){
		
		var form = document.getElementById('form');//retrieve the form as a DOM element

		var input = document.createElement('input');//prepare a new input DOM element
		input.setAttribute('name', "TimeElapsed");//set the param name
		input.setAttribute('value', timeElapsed(startTime));//set the value
		input.setAttribute('type', "hidden")//set the type, like "hidden" or other

		form.appendChild(input);//append the input to the form
        var submitFormFunction = Object.getPrototypeOf(form).submit;
        submitFormFunction.call(form);
		
		}
		startTime = new Date()
		function timeElapsed(startTime) {
		  endTime = new Date();
		  var timeDiff = endTime - startTime; //in ms
		  // strip the ms
		  timeDiff /= 1000;

		  // get seconds 
		  var seconds = Math.round(timeDiff);
		  return seconds;
		}
		answers =[] //Annotation + 3 justifications minimum (?)
</script>
